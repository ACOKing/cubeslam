<!doctype html>
<html>
  <head>
    <meta charset='utf8'>
    <title>Verlet Simulator</title>
    <style>
      .sim, .hidden {display: none;}
      .sim.active {display: inline-block;}

      .sim .info {
        position: absolute;
        top: 0;
        left: 350px;
      }

      .sim .info video {
        border: 1px dashed red;
      }

      .renderer-2d canvas {
        margin-top: 30px;
      }
      .renderer-2d ul {
        display: inline-block;
        vertical-align: top;
        margin-top: 30px;
      }

      #colorSelectContainer {
        z-index:1000;
        display:none;
        position:absolute;
        top:50%;
        left:50%;
        margin-top:-240px;
        margin-left:-320px;
        width: 640px;
          height:480px;
      }

      #colorSelectArea {
        position:absolute;
        width:100px;
        height:100px;
        left: 450px;
        top:80px;
        border: 10px solid red;
        z-index:30;
      }

      #colorSelectCenter {
        position:absolute;
        display: block;
        left:50%;
        top:50%;
        margin-left:-5px;
        margin-top:-5px;
        width:10px;
        height:10px;
        border: 1px solid black; 
        border-radius: 5px 5px 5px 5px;
        z-index:31;
      }

      #marker {
        position:absolute;
        width:20px;
        height:20px;
        top:350px;
        background-color: #ff0000; 
        border-radius: 10px 10px 10px 10px;
        z-index:390;
      }

      #videoInput {
        /*display:none;
      */

          left:5px;
          margin-top: 15px;
         -webkit-transform: scale(-1,1);
         width: 640px;
         height:480px;
         border-radius: 8px 8px 8px 8px;

      }

      #settingsGUIContainer {
        position:absolute;
        left:20px;
        z-index:4000;
      }

      #cameraRequestAttention {
        border-top: 10px solid #fd306f;
        width: 100%;
        height: 200px;
        position: absolute;
        top: 0px;
        left: 0px;
        display: none;
        text-align: center;
      }
      #cameraRequestAttention img {
        margin: -170px auto 0px auto;
      }

    </style>
    
  </head>
  <body>

    <!-- THE LOBBY -->

    <div class='sim' id='lobby'>
      <h1 class="copy" id="the_title">Pong Realtime Multiplayer test</h1>
      {{ if .RoomEmpty }}
        <h2><button id='play'>Play</button></h2>
      {{ else }}
        {{ if .RoomFull }}
          <p class="copy" id="gameFull">This Game Room is full.</p>
        {{ else }}
          <p>Your friend is waiting for you to join this Game Room!</p>
          <h2><button id='play' class="copy">Play</button></h2>
        {{ end }}
      {{ end }}
    </div>

    <!-- CAMERA REQUEST ATTENTION -->

    <div id="cameraRequestAttention">
      <img src="/images/cameraRequestAttention.gif" />
    </div>


    <!-- CHOOSE PADDLE -->

    <!-- COUNTDOWN -->

    <!-- INSTRUCTION FOR GAMEPLAY -->

    <!-- INVITE FRIEND BUTTON -->

    <!-- INVITE FRIEND / PAUSE DIALOG -->

    <!-- LEVEL MSG -->

    <!-- GAME OVER DIALOG -->

    <!-- FRIEND CHOOSING PADDLE PAUSE -->

    <!-- PLAY FRIEND BUTTON -->


    <!-- 2 PLAYER GAME OVER -->

    <!-- YOUR FRIEND LEFT THE ROOM -->



    <!-- GAME STUFF -->

    <div id="settingsGUIContainer">
      <div id="monitorFinalContainer"></div>
    </div>
    <div id="colorSelectContainer">
      <div id="colorSelectArea">
        <div id="colorSelectCenter"></div> 
      </div>
      <div id="marker"></div>
      <video id="videoInput"></video>
    </div>
   
    <div class='sim' id='game'>
      <canvas id="canv" width="320" height="480"></canvas>
      <div class='info'>
        <ul>
          <li>Waiting for player...<span id="hos" class='hidden'>as host</span></li>
          <li id='ful' class='hidden'>Room full</li>
          <li id='con' class='hidden'>Player connected <span id='vid' class='hidden'>with video</span></li>
          <li id='syn' class='hidden'>Synchronizing <span id='sync'>...</span></li>
          <li id='sta' class='hidden'>Starting in <span id='countdown'>5</span></li>
          <li id='go' class='hidden'>Go!</li>
        </ul>
        <video id="remoteInput" width="160" height="120" autoplay class='hidden'></video>
      </div>
    </div>

    <!-- SCRIPTING -->

    <script>
      var conferenceRoom = "{{.Room}}"
        , channelToken = "{{.ChannelToken}}"
        , clientId = "{{.ClientId}}";
      window.CHANNEL_HOST = 'ec2-176-34-161-202.eu-west-1.compute.amazonaws.com:8000';
    </script>
    <script src="/_ah/channel/jsapi"></script>
    <script src="javascript/libs/jquery-1.8.1.min.js"></script>
    <script src='javascript/libs/three.js'></script>
    <script src='javascript/libs/Stats.js'></script>
    <script src='javascript/libs/Tween.js'></script>
    <script src='javascript/libs/SimplexNoise.js'></script>
    <script src="javascript/libs/dat.gui.min.js"></script>
    <script src="javascript/libs/datachannel.js"></script>
    <script src='./build/build.js'></script>
    <script> require('verlet-sim')() </script>

  </body>
</html>
